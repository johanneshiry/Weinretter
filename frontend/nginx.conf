worker_processes 1;

events { worker_connections 1024; }

http {
    include    mime.types;
    sendfile on;

    # output compression saves bandwidth
    gzip  on;
    gzip_http_version 1.1;
    gzip_vary on;
    gzip_comp_level 6;
    gzip_proxied any;
    gzip_types text/plain text/css application/json application/javascript application/x-javascript text/javascript text/xml application/xml application/rss+xml application/atom+xml application/rdf+xml;

    # make sure gzip does not lose large gzipped js or css files
    # see http://blog.leetsoft.com/2007/07/25/nginx-gzip-ssl.html
    gzip_buffers 16 8k;

    # Disable gzip for certain browsers.
    gzip_disable “MSIE [1-6].(?!.*SV1)”;

    server {
        root /usr/share/nginx/html/;
        index index.html;
        # server_name ec2-54-86-155-155.compute-1.amazonaws.com;
        listen 3000;

        location / {
            # checks for static file, if not found proxy to app
            try_files $uri $uri/index.html $uri/ =404;
        }

        # TODO:
        error_page 500 502 503 504 /500.html;
        location = /500.html {
            root /usr/share/nginx/html;
        }
    }
}
